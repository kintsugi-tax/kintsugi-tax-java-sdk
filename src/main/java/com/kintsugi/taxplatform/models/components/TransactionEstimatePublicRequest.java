/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package com.kintsugi.taxplatform.models.components;

import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonInclude.Include;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.core.type.TypeReference;
import com.kintsugi.taxplatform.utils.LazySingletonValue;
import com.kintsugi.taxplatform.utils.Utils;
import java.lang.Boolean;
import java.lang.Override;
import java.lang.String;
import java.lang.SuppressWarnings;
import java.time.OffsetDateTime;
import java.util.List;
import java.util.Optional;

/**
 * TransactionEstimatePublicRequest
 * 
 * <p>Public request model for tax estimation API documentation.
 * This model excludes internal fields like enriched_fields and total_amount that should not be exposed
 * in API docs.
 */
public class TransactionEstimatePublicRequest {
    /**
     * The date of the transaction in ISO 8601 format (e.g., 2025-01-25T12:00:00Z).
     */
    @JsonProperty("date")
    private OffsetDateTime date;

    /**
     * Unique identifier of this transaction in the source system.
     */
    @JsonProperty("external_id")
    private String externalId;


    @JsonProperty("currency")
    private CurrencyEnum currency;

    /**
     * An optional description of the transaction.
     */
    @JsonInclude(Include.NON_ABSENT)
    @JsonProperty("description")
    private Optional<String> description;


    @JsonInclude(Include.NON_ABSENT)
    @JsonProperty("source")
    private Optional<? extends SourceEnum> source;

    /**
     * Indicates if the transaction involves a marketplace.
     */
    @JsonInclude(Include.NON_ABSENT)
    @JsonProperty("marketplace")
    private Optional<Boolean> marketplace;

    /**
     * List of items involved in the transaction.
     */
    @JsonProperty("transaction_items")
    private List<TransactionItemEstimateBase> transactionItems;


    @JsonInclude(Include.NON_ABSENT)
    @JsonProperty("customer")
    private Optional<? extends CustomerBasePublic> customer;

    /**
     * List of addresses related to the transaction. At least one BILL_TO or SHIP_TO address must be
     * provided. The address will be validated during estimation, and the transaction may be rejected if
     * the address does not pass validation.
     * 
     * <p>The SHIP_TO will be preferred to use for determining tax liability.
     */
    @JsonProperty("addresses")
    private List<TransactionEstimatePublicRequestAddress> addresses;

    @JsonCreator
    public TransactionEstimatePublicRequest(
            @JsonProperty("date") OffsetDateTime date,
            @JsonProperty("external_id") String externalId,
            @JsonProperty("currency") CurrencyEnum currency,
            @JsonProperty("description") Optional<String> description,
            @JsonProperty("source") Optional<? extends SourceEnum> source,
            @JsonProperty("marketplace") Optional<Boolean> marketplace,
            @JsonProperty("transaction_items") List<TransactionItemEstimateBase> transactionItems,
            @JsonProperty("customer") Optional<? extends CustomerBasePublic> customer,
            @JsonProperty("addresses") List<TransactionEstimatePublicRequestAddress> addresses) {
        Utils.checkNotNull(date, "date");
        Utils.checkNotNull(externalId, "externalId");
        Utils.checkNotNull(currency, "currency");
        Utils.checkNotNull(description, "description");
        Utils.checkNotNull(source, "source");
        Utils.checkNotNull(marketplace, "marketplace");
        Utils.checkNotNull(transactionItems, "transactionItems");
        Utils.checkNotNull(customer, "customer");
        Utils.checkNotNull(addresses, "addresses");
        this.date = date;
        this.externalId = externalId;
        this.currency = currency;
        this.description = description;
        this.source = source;
        this.marketplace = marketplace;
        this.transactionItems = transactionItems;
        this.customer = customer;
        this.addresses = addresses;
    }
    
    public TransactionEstimatePublicRequest(
            OffsetDateTime date,
            String externalId,
            CurrencyEnum currency,
            List<TransactionItemEstimateBase> transactionItems,
            List<TransactionEstimatePublicRequestAddress> addresses) {
        this(date, externalId, currency,
            Optional.empty(), Optional.empty(), Optional.empty(),
            transactionItems, Optional.empty(), addresses);
    }

    /**
     * The date of the transaction in ISO 8601 format (e.g., 2025-01-25T12:00:00Z).
     */
    @JsonIgnore
    public OffsetDateTime date() {
        return date;
    }

    /**
     * Unique identifier of this transaction in the source system.
     */
    @JsonIgnore
    public String externalId() {
        return externalId;
    }

    @JsonIgnore
    public CurrencyEnum currency() {
        return currency;
    }

    /**
     * An optional description of the transaction.
     */
    @JsonIgnore
    public Optional<String> description() {
        return description;
    }

    @SuppressWarnings("unchecked")
    @JsonIgnore
    public Optional<SourceEnum> source() {
        return (Optional<SourceEnum>) source;
    }

    /**
     * Indicates if the transaction involves a marketplace.
     */
    @JsonIgnore
    public Optional<Boolean> marketplace() {
        return marketplace;
    }

    /**
     * List of items involved in the transaction.
     */
    @JsonIgnore
    public List<TransactionItemEstimateBase> transactionItems() {
        return transactionItems;
    }

    @SuppressWarnings("unchecked")
    @JsonIgnore
    public Optional<CustomerBasePublic> customer() {
        return (Optional<CustomerBasePublic>) customer;
    }

    /**
     * List of addresses related to the transaction. At least one BILL_TO or SHIP_TO address must be
     * provided. The address will be validated during estimation, and the transaction may be rejected if
     * the address does not pass validation.
     * 
     * <p>The SHIP_TO will be preferred to use for determining tax liability.
     */
    @JsonIgnore
    public List<TransactionEstimatePublicRequestAddress> addresses() {
        return addresses;
    }

    public static Builder builder() {
        return new Builder();
    }


    /**
     * The date of the transaction in ISO 8601 format (e.g., 2025-01-25T12:00:00Z).
     */
    public TransactionEstimatePublicRequest withDate(OffsetDateTime date) {
        Utils.checkNotNull(date, "date");
        this.date = date;
        return this;
    }

    /**
     * Unique identifier of this transaction in the source system.
     */
    public TransactionEstimatePublicRequest withExternalId(String externalId) {
        Utils.checkNotNull(externalId, "externalId");
        this.externalId = externalId;
        return this;
    }

    public TransactionEstimatePublicRequest withCurrency(CurrencyEnum currency) {
        Utils.checkNotNull(currency, "currency");
        this.currency = currency;
        return this;
    }

    /**
     * An optional description of the transaction.
     */
    public TransactionEstimatePublicRequest withDescription(String description) {
        Utils.checkNotNull(description, "description");
        this.description = Optional.ofNullable(description);
        return this;
    }


    /**
     * An optional description of the transaction.
     */
    public TransactionEstimatePublicRequest withDescription(Optional<String> description) {
        Utils.checkNotNull(description, "description");
        this.description = description;
        return this;
    }

    public TransactionEstimatePublicRequest withSource(SourceEnum source) {
        Utils.checkNotNull(source, "source");
        this.source = Optional.ofNullable(source);
        return this;
    }


    public TransactionEstimatePublicRequest withSource(Optional<? extends SourceEnum> source) {
        Utils.checkNotNull(source, "source");
        this.source = source;
        return this;
    }

    /**
     * Indicates if the transaction involves a marketplace.
     */
    public TransactionEstimatePublicRequest withMarketplace(boolean marketplace) {
        Utils.checkNotNull(marketplace, "marketplace");
        this.marketplace = Optional.ofNullable(marketplace);
        return this;
    }


    /**
     * Indicates if the transaction involves a marketplace.
     */
    public TransactionEstimatePublicRequest withMarketplace(Optional<Boolean> marketplace) {
        Utils.checkNotNull(marketplace, "marketplace");
        this.marketplace = marketplace;
        return this;
    }

    /**
     * List of items involved in the transaction.
     */
    public TransactionEstimatePublicRequest withTransactionItems(List<TransactionItemEstimateBase> transactionItems) {
        Utils.checkNotNull(transactionItems, "transactionItems");
        this.transactionItems = transactionItems;
        return this;
    }

    public TransactionEstimatePublicRequest withCustomer(CustomerBasePublic customer) {
        Utils.checkNotNull(customer, "customer");
        this.customer = Optional.ofNullable(customer);
        return this;
    }


    public TransactionEstimatePublicRequest withCustomer(Optional<? extends CustomerBasePublic> customer) {
        Utils.checkNotNull(customer, "customer");
        this.customer = customer;
        return this;
    }

    /**
     * List of addresses related to the transaction. At least one BILL_TO or SHIP_TO address must be
     * provided. The address will be validated during estimation, and the transaction may be rejected if
     * the address does not pass validation.
     * 
     * <p>The SHIP_TO will be preferred to use for determining tax liability.
     */
    public TransactionEstimatePublicRequest withAddresses(List<TransactionEstimatePublicRequestAddress> addresses) {
        Utils.checkNotNull(addresses, "addresses");
        this.addresses = addresses;
        return this;
    }

    @Override
    public boolean equals(java.lang.Object o) {
        if (this == o) {
            return true;
        }
        if (o == null || getClass() != o.getClass()) {
            return false;
        }
        TransactionEstimatePublicRequest other = (TransactionEstimatePublicRequest) o;
        return 
            Utils.enhancedDeepEquals(this.date, other.date) &&
            Utils.enhancedDeepEquals(this.externalId, other.externalId) &&
            Utils.enhancedDeepEquals(this.currency, other.currency) &&
            Utils.enhancedDeepEquals(this.description, other.description) &&
            Utils.enhancedDeepEquals(this.source, other.source) &&
            Utils.enhancedDeepEquals(this.marketplace, other.marketplace) &&
            Utils.enhancedDeepEquals(this.transactionItems, other.transactionItems) &&
            Utils.enhancedDeepEquals(this.customer, other.customer) &&
            Utils.enhancedDeepEquals(this.addresses, other.addresses);
    }
    
    @Override
    public int hashCode() {
        return Utils.enhancedHash(
            date, externalId, currency,
            description, source, marketplace,
            transactionItems, customer, addresses);
    }
    
    @Override
    public String toString() {
        return Utils.toString(TransactionEstimatePublicRequest.class,
                "date", date,
                "externalId", externalId,
                "currency", currency,
                "description", description,
                "source", source,
                "marketplace", marketplace,
                "transactionItems", transactionItems,
                "customer", customer,
                "addresses", addresses);
    }

    @SuppressWarnings("UnusedReturnValue")
    public final static class Builder {

        private OffsetDateTime date;

        private String externalId;

        private CurrencyEnum currency;

        private Optional<String> description = Optional.empty();

        private Optional<? extends SourceEnum> source = Optional.empty();

        private Optional<Boolean> marketplace;

        private List<TransactionItemEstimateBase> transactionItems;

        private Optional<? extends CustomerBasePublic> customer = Optional.empty();

        private List<TransactionEstimatePublicRequestAddress> addresses;

        private Builder() {
          // force use of static builder() method
        }


        /**
         * The date of the transaction in ISO 8601 format (e.g., 2025-01-25T12:00:00Z).
         */
        public Builder date(OffsetDateTime date) {
            Utils.checkNotNull(date, "date");
            this.date = date;
            return this;
        }


        /**
         * Unique identifier of this transaction in the source system.
         */
        public Builder externalId(String externalId) {
            Utils.checkNotNull(externalId, "externalId");
            this.externalId = externalId;
            return this;
        }


        public Builder currency(CurrencyEnum currency) {
            Utils.checkNotNull(currency, "currency");
            this.currency = currency;
            return this;
        }


        /**
         * An optional description of the transaction.
         */
        public Builder description(String description) {
            Utils.checkNotNull(description, "description");
            this.description = Optional.ofNullable(description);
            return this;
        }

        /**
         * An optional description of the transaction.
         */
        public Builder description(Optional<String> description) {
            Utils.checkNotNull(description, "description");
            this.description = description;
            return this;
        }


        public Builder source(SourceEnum source) {
            Utils.checkNotNull(source, "source");
            this.source = Optional.ofNullable(source);
            return this;
        }

        public Builder source(Optional<? extends SourceEnum> source) {
            Utils.checkNotNull(source, "source");
            this.source = source;
            return this;
        }


        /**
         * Indicates if the transaction involves a marketplace.
         */
        public Builder marketplace(boolean marketplace) {
            Utils.checkNotNull(marketplace, "marketplace");
            this.marketplace = Optional.ofNullable(marketplace);
            return this;
        }

        /**
         * Indicates if the transaction involves a marketplace.
         */
        public Builder marketplace(Optional<Boolean> marketplace) {
            Utils.checkNotNull(marketplace, "marketplace");
            this.marketplace = marketplace;
            return this;
        }


        /**
         * List of items involved in the transaction.
         */
        public Builder transactionItems(List<TransactionItemEstimateBase> transactionItems) {
            Utils.checkNotNull(transactionItems, "transactionItems");
            this.transactionItems = transactionItems;
            return this;
        }


        public Builder customer(CustomerBasePublic customer) {
            Utils.checkNotNull(customer, "customer");
            this.customer = Optional.ofNullable(customer);
            return this;
        }

        public Builder customer(Optional<? extends CustomerBasePublic> customer) {
            Utils.checkNotNull(customer, "customer");
            this.customer = customer;
            return this;
        }


        /**
         * List of addresses related to the transaction. At least one BILL_TO or SHIP_TO address must be
         * provided. The address will be validated during estimation, and the transaction may be rejected if
         * the address does not pass validation.
         * 
         * <p>The SHIP_TO will be preferred to use for determining tax liability.
         */
        public Builder addresses(List<TransactionEstimatePublicRequestAddress> addresses) {
            Utils.checkNotNull(addresses, "addresses");
            this.addresses = addresses;
            return this;
        }

        public TransactionEstimatePublicRequest build() {
            if (marketplace == null) {
                marketplace = _SINGLETON_VALUE_Marketplace.value();
            }

            return new TransactionEstimatePublicRequest(
                date, externalId, currency,
                description, source, marketplace,
                transactionItems, customer, addresses);
        }


        private static final LazySingletonValue<Optional<Boolean>> _SINGLETON_VALUE_Marketplace =
                new LazySingletonValue<>(
                        "marketplace",
                        "false",
                        new TypeReference<Optional<Boolean>>() {});
    }
}
